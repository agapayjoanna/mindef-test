(function(m){var E,k,C,t,c,A,x,H,w,j,g=0,z={},i=[],d=0,a={},e=[],l=null,F=new Image(),v=/\.(jpg|gif|png|bmp|jpeg|res)(.*)?$/i,r=/[^\.]\.(swf)\s*$/i,n,q=1,G="",s=0,b="",u,p,D=false,f=m.extend(m("<div/>")[0],{prop:0}),y=m.browser.msie&&m.browser.version<7&&!window.XMLHttpRequest,B=function(){k.hide();F.onerror=F.onload=null;if(l){l.abort()}E.empty()},o=function(){if(false===z.onError(i,g,z)){k.hide();D=false;return}z.titleShow=false;z.width="auto";z.height="auto";E.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline()},h=function(I,J){if(J==null||J==""||I.length==0||J.length>I.length){return false}if(I.substring(I.length-J.length)==J){return true}else{return false}return true};_start=function(){var M=i[g],J,L,O,N,I,K;B();z=m.extend({},m.fn.fancybox.defaults,(typeof m(M).data("fancybox")=="undefined"?z:m(M).data("fancybox")));K=z.onStart(i,g,z);if(K===false){D=false;return}else{if(typeof K=="object"){z=m.extend(z,K)}}O=z.title||(M.nodeName?m(M).attr("atitle"):M.title)||"";if(M.nodeName&&!z.orig){z.orig=m(M).children("img:first").length?m(M).children("img:first"):m(M)}if(O===""&&z.orig&&z.titleFromAlt){O=z.orig.attr("alt")}J=z.href||(M.nodeName?m(M).attr("href"):M.href)||null;if((/^(?:javascript)/i).test(J)||J=="#"||J==null){J=G}if(z.type){L=z.type;if(!J){J=z.content}}else{if(z.content){L="html"}else{if(J){if(J.match(v)){L="image"}else{if(J.match(r)){L="swf"}else{if(m(M).hasClass("iframe")){L="iframe"}else{if(J.indexOf("#")===0){L="inline"}else{if(h(J,"file")){L="image"}else{L="ajax"}}}}}}}}if(!L){o();return}if(L=="inline"){M=J.substr(J.indexOf("#"));L=m(M).length>0?"inline":"ajax"}z.type=L;z.href=J;z.title=O;if(z.autoDimensions){if(z.type=="html"||z.type=="inline"||z.type=="ajax"){z.width="auto";z.height="auto"}else{z.autoDimensions=false}}if(z.modal){z.overlayShow=true;z.hideOnOverlayClick=false;z.hideOnContentClick=false;z.enableEscapeButton=false;z.showCloseButton=false}z.padding=parseInt(z.padding,10);z.margin=parseInt(z.margin,10);E.css("padding",(z.padding+z.margin));m(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){m(this).replaceWith(A.children())});switch(L){case"html":E.html(z.content);_process_inline();break;case"inline":if(m(M).parent().is("#fancybox-content")===true){D=false;return}m('<div class="fancybox-inline-tmp" />').hide().insertBefore(m(M)).bind("fancybox-cleanup",function(){m(this).replaceWith(A.children())}).bind("fancybox-cancel",function(){m(this).replaceWith(E.children())});m(M).appendTo(E);_process_inline();break;case"image":D=false;m.fancybox.showActivity();F=new Image();F.onerror=function(){o()};F.onload=function(){D=true;F.onerror=F.onload=null;_process_image()};F.src=J;break;case"swf":z.scrolling="no";N='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+z.width+'" height="'+z.height+'"><param name="movie" value="'+J+'"></param>';I="";m.each(z.swf,function(P,Q){N+='<param name="'+P+'" value="'+Q+'"></param>';I+=" "+P+'="'+Q+'"'});N+='<embed src="'+J+'" type="application/x-shockwave-flash" width="'+z.width+'" height="'+z.height+'"'+I+"></embed></object>";E.html(N);_process_inline();break;case"ajax":D=false;m.fancybox.showActivity();z.ajax.win=z.ajax.success;l=m.ajax(m.extend({},z.ajax,{url:J,data:z.ajax.data||{},error:function(P,R,Q){if(P.status>0){o()}},success:function(Q,S,P){var R=typeof P=="object"?P:l;if(R.status==200){if(typeof z.ajax.win=="function"){K=z.ajax.win(J,Q,S,P);if(K===false){k.hide();return}else{if(typeof K=="string"||typeof K=="object"){Q=K}}}E.html(Q);_process_inline()}}}));break;case"iframe":_show();break}},_process_inline=function(){var I=z.width,J=z.height;if(I.toString().indexOf("%")>-1){I=parseInt((m(window).width()-(z.margin*2))*parseFloat(I)/100,10)+"px"}else{I=I=="auto"?"auto":I+"px"}if(J.toString().indexOf("%")>-1){J=parseInt((m(window).height()-(z.margin*2))*parseFloat(J)/100,10)+"px"}else{J=J=="auto"?"auto":J+"px"}E.wrapInner('<div style="width:'+I+";height:"+J+";overflow: "+(z.scrolling=="auto"?"auto":(z.scrolling=="yes"?"scroll":"hidden"))+';position:relative;"></div>');z.width=E.width();z.height=E.height();_show()},_process_image=function(){z.width=F.width;z.height=F.height;m("<img />").attr({id:"fancybox-img",src:F.src,alt:z.title}).appendTo(E);_show()},_show=function(){var J,I;k.hide();if(t.is(":visible")&&false===a.onCleanup(e,d,a)){m.event.trigger("fancybox-cancel");D=false;return}D=true;m(A.add(C)).unbind();m(window).unbind("resize.fb scroll.fb");m(document).unbind("keydown.fb");if(t.is(":visible")&&a.titlePosition!=="outside"){t.css("height",t.height())}e=i;d=g;a=z;if(a.overlayShow){C.css({"background-color":a.overlayColor,opacity:a.overlayOpacity,cursor:a.hideOnOverlayClick?"pointer":"auto",height:m(document).height()});if(!C.is(":visible")){if(y){m("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}C.show()}}else{C.hide()}p=_get_zoom_to();_process_title();if(t.is(":visible")){m(x.add(w).add(j)).hide();J=t.position(),u={top:J.top,left:J.left,width:t.width(),height:t.height()};I=(u.width==p.width&&u.height==p.height);A.fadeTo(a.changeFade,0.3,function(){var K=function(){A.html(E.contents()).fadeTo(a.changeFade,1,_finish)};m.event.trigger("fancybox-change");A.empty().removeAttr("filter").css({"border-width":a.padding,width:p.width-a.padding*2,height:z.autoDimensions?"auto":p.height-s-a.padding*2});if(I){K()}else{f.prop=0;m(f).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:_draw,complete:K})}});return}t.removeAttr("style");A.css("border-width",a.padding);if(a.transitionIn=="elastic"){u=_get_zoom_from();A.html(E.contents());t.show();if(a.opacity){p.opacity=0}f.prop=0;m(f).animate({prop:1},{duration:a.speedIn,easing:a.easingIn,step:_draw,complete:_finish});return}if(a.titlePosition=="inside"&&s>0){H.show()}A.css({width:p.width-a.padding*2,height:z.autoDimensions?"auto":p.height-s-a.padding*2}).html(E.contents());t.css(p).fadeIn(a.transitionIn=="none"?0:a.speedIn,_finish)},_format_title=function(I){if(I&&I.length){if(a.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+I+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+a.titlePosition+'">'+I+"</div>"}return false},_process_title=function(){b=a.title||"";s=0;H.empty().removeAttr("style").removeClass();if(a.titleShow===false){H.hide();return}b=m.isFunction(a.titleFormat)?a.titleFormat(b,e,d,a):_format_title(b);if(!b||b===""){H.hide();return}H.addClass("fancybox-title-"+a.titlePosition).html(b).appendTo("body").show();switch(a.titlePosition){case"inside":H.css({width:p.width-(a.padding*2),marginLeft:a.padding,marginRight:a.padding});s=H.outerHeight(true);H.appendTo(c);p.height+=s;break;case"over":H.css({marginLeft:a.padding,width:p.width-(a.padding*2),bottom:a.padding}).appendTo(c);break;case"float":H.css("left",parseInt((H.width()-p.width-40)/2,10)*-1).appendTo(t);break;default:H.css({width:p.width-(a.padding*2),paddingLeft:a.padding,paddingRight:a.padding}).appendTo(t);break}H.hide()},_set_navigation=function(){if(a.enableEscapeButton||a.enableKeyboardNav){m(document).bind("keydown.fb",function(I){if(I.keyCode==27&&a.enableEscapeButton){I.preventDefault();m.fancybox.close()}else{if((I.keyCode==37||I.keyCode==39)&&a.enableKeyboardNav&&I.target.tagName!=="INPUT"&&I.target.tagName!=="TEXTAREA"&&I.target.tagName!=="SELECT"){I.preventDefault();m.fancybox[I.keyCode==37?"prev":"next"]()}}})}if(!a.showNavArrows){w.hide();j.hide();return}if((a.cyclic&&e.length>1)||d!==0){w.show()}if((a.cyclic&&e.length>1)||d!=(e.length-1)){j.show()}},_finish=function(){if(!m.support.opacity){A.get(0).style.removeAttribute("filter");t.get(0).style.removeAttribute("filter")}if(z.autoDimensions){A.css("height","auto")}t.css("height","auto");if(b&&b.length){H.show()}if(a.showCloseButton){x.show();if(a.istablet){m(x).css("background-position","-41px 0")}}_set_navigation();if(a.hideOnContentClick){A.bind("click",m.fancybox.close)}if(a.hideOnOverlayClick){C.bind("click",m.fancybox.close)}m(window).bind("resize.fb",m.fancybox.resize);if(a.centerOnScroll){m(window).bind("scroll.fb",m.fancybox.center)}if(a.type=="iframe"){m('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+(m.browser.msie?'allowtransparency="true""':"")+' scrolling="'+z.scrolling+'" src="'+a.href+'"></iframe>').appendTo(A)}t.show();D=false;m.fancybox.center();a.onComplete(e,d,a);_preload_images()},_preload_images=function(){var I,J;if((e.length-1)>d){I=e[d+1].href;if(typeof I!=="undefined"&&I.match(v)){J=new Image();J.src=I}}if(d>0){I=e[d-1].href;if(typeof I!=="undefined"&&I.match(v)){J=new Image();J.src=I}}},_draw=function(J){var I={width:parseInt(u.width+(p.width-u.width)*J,10),height:parseInt(u.height+(p.height-u.height)*J,10),top:parseInt(u.top+(p.top-u.top)*J,10),left:parseInt(u.left+(p.left-u.left)*J,10)};if(typeof p.opacity!=="undefined"){I.opacity=J<0.5?0.5:J}t.css(I);A.css({width:I.width-a.padding*2,height:I.height-(s*J)-a.padding*2})},_get_viewport=function(){return[m(window).width()-(a.margin*2),m(window).height()-(a.margin*2),m(document).scrollLeft()+a.margin,m(document).scrollTop()+a.margin]},_get_zoom_to=function(){var I=_get_viewport(),M={},J=a.autoScale,K=a.padding*2,L;if(a.width.toString().indexOf("%")>-1){M.width=parseInt((I[0]*parseFloat(a.width))/100,10)}else{M.width=a.width+K}if(a.height.toString().indexOf("%")>-1){M.height=parseInt((I[1]*parseFloat(a.height))/100,10)}else{M.height=a.height+K}if(J&&(M.width>I[0]||M.height>I[1])){if(z.type=="image"||z.type=="swf"){L=(a.width)/(a.height);if((M.width)>I[0]){M.width=I[0];M.height=parseInt(((M.width-K)/L)+K,10)}if((M.height)>I[1]){M.height=I[1];M.width=parseInt(((M.height-K)*L)+K,10)}}else{M.width=Math.min(M.width,I[0]);M.height=Math.min(M.height,I[1])}}M.top=parseInt(Math.max(I[3]-20,I[3]+((I[1]-M.height-40)*0.5)),10);M.left=parseInt(Math.max(I[2]-20,I[2]+((I[0]-M.width-40)*0.5)),10);return M},_get_obj_pos=function(I){var J=I.offset();J.top+=parseInt(I.css("paddingTop"),10)||0;J.left+=parseInt(I.css("paddingLeft"),10)||0;J.top+=parseInt(I.css("border-top-width"),10)||0;J.left+=parseInt(I.css("border-left-width"),10)||0;J.width=I.width();J.height=I.height();return J},_get_zoom_from=function(){var L=z.orig?m(z.orig):false,K={},J,I;if(L&&L.length){J=_get_obj_pos(L);K={width:J.width+(a.padding*2),height:J.height+(a.padding*2),top:J.top-a.padding-20,left:J.left-a.padding-20}}else{I=_get_viewport();K={width:a.padding*2,height:a.padding*2,top:parseInt(I[3]+I[1]*0.5,10),left:parseInt(I[2]+I[0]*0.5,10)}}return K},_animate_loading=function(){if(!k.is(":visible")){clearInterval(n);return}m("div",k).css("top",(q*-40)+"px");q=(q+1)%12};m.fn.fancybox=function(J,I){if(!m(this).length){return this}m(this).data("fancybox",m.extend({},J,(m.metadata?m(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(L){L.preventDefault();if(D){return}D=true;m(this).blur();i=[];g=0;var K=m(this).attr("rel")||"";if(!K||K==""||K==="nofollow"){i.push(this)}else{i=m("a[rel="+K+"], area[rel="+K+"]");g=i.index(this)}G=I;_start();return});return this};m.fancybox=function(L){var K;if(D){return}D=true;K=typeof arguments[1]!=="undefined"?arguments[1]:{};i=[];g=parseInt(K.index,10)||0;if(m.isArray(L)){for(var J=0,I=L.length;J<I;J++){if(typeof L[J]=="object"){m(L[J]).data("fancybox",m.extend({},K,L[J]))}else{L[J]=m({}).data("fancybox",m.extend({content:L[J]},K))}}i=jQuery.merge(i,L)}else{if(typeof L=="object"){m(L).data("fancybox",m.extend({},K,L))}else{L=m({}).data("fancybox",m.extend({content:L},K))}i.push(L)}if(g>i.length||g<0){g=0}_start()};m.fancybox.showActivity=function(){clearInterval(n);k.show();n=setInterval(_animate_loading,66)};m.fancybox.hideActivity=function(){k.hide()};m.fancybox.next=function(){return m.fancybox.pos(d+1)};m.fancybox.prev=function(){return m.fancybox.pos(d-1)};m.fancybox.pos=function(I){if(D){return}I=parseInt(I);i=e;if(I>-1&&I<e.length){g=I;_start()}else{if(a.cyclic&&e.length>1){g=I>=e.length?0:e.length-1;_start()}}return};m.fancybox.cancel=function(){if(D){return}D=true;m.event.trigger("fancybox-cancel");B();z.onCancel(i,g,z);D=false};m.fancybox.close=function(){if(D||t.is(":hidden")){return}D=true;if(a&&false===a.onCleanup(e,d,a)){D=false;return}B();m(x.add(w).add(j)).hide();m(A.add(C)).unbind();m(window).unbind("resize.fb scroll.fb");m(document).unbind("keydown.fb");A.find("iframe").attr("src",y&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(a.titlePosition!=="inside"){H.empty()}t.stop();function I(){C.fadeOut("fast");H.empty().hide();t.hide();m.event.trigger("fancybox-cleanup");A.empty();a.onClosed(e,d,a);e=z=[];d=g=0;a=z={};D=false}if(a.transitionOut=="elastic"){u=_get_zoom_from();var J=t.position();p={top:J.top,left:J.left,width:t.width(),height:t.height()};if(a.opacity){p.opacity=1}H.empty().hide();f.prop=1;m(f).animate({prop:0},{duration:a.speedOut,easing:a.easingOut,step:_draw,complete:I})}else{t.fadeOut(a.transitionOut=="none"?0:a.speedOut,I)}};m.fancybox.resize=function(){if(C.is(":visible")){C.css("height",m(document).height())}m.fancybox.center(true)};m.fancybox.center=function(){var I,J;if(D){return}J=arguments[0]===true?1:0;I=_get_viewport();if(!J&&(t.width()>I[0]||t.height()>I[1])){return}t.stop().animate({top:parseInt(Math.max(I[3]-20,I[3]+((I[1]-A.height()-40)*0.5)-a.padding)),left:parseInt(Math.max(I[2]-20,I[2]+((I[0]-A.width()-40)*0.5)-a.padding))},typeof arguments[0]=="number"?arguments[0]:200)};m.fancybox.init=function(){if(m("#fancybox-wrap").length){return}m("body").append(E=m('<div id="fancybox-tmp"></div>'),k=m('<div id="fancybox-loading"><div></div></div>'),C=m('<div id="fancybox-overlay"></div>'),t=m('<div id="fancybox-wrap"></div>'));c=m('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(t);c.append(A=m('<div id="fancybox-content"></div>'),x=m('<a id="fancybox-close"></a>'),H=m('<div id="fancybox-title"></div>'),w=m('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),j=m('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));x.click(m.fancybox.close);k.click(m.fancybox.cancel);w.click(function(I){I.preventDefault();m.fancybox.prev()});j.click(function(I){I.preventDefault();m.fancybox.next()});if(m.fn.mousewheel){t.bind("mousewheel.fb",function(I,J){if(D){I.preventDefault()}else{if(m(I.target).get(0).clientHeight==0||m(I.target).get(0).scrollHeight===m(I.target).get(0).clientHeight){I.preventDefault();m.fancybox[J>0?"prev":"next"]()}}})}if(!m.support.opacity){t.addClass("fancybox-ie")}if(y){k.addClass("fancybox-ie6");t.addClass("fancybox-ie6");m('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(c)}};m.fn.fancybox.defaults={istablet:false,padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"black",titleShow:true,titlePosition:"inside",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};m(document).ready(function(){m.fancybox.init()})})(jQuery);