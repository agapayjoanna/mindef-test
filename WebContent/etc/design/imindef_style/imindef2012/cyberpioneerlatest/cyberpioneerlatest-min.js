$(function(){$(".cyberpioneerlatest .menu_cyberpioneer ul").tabs($(".cyberpioneerlatest .flex-control-nav ul"))}),function(t){t.tabs=function(e,a,r){var n=e;n.$el=t(e),n.$em=t(a),n.init=function(){n.options=t.extend({},t.tabs.defaultOptions,r),n.$window=n.$el.parent().parent(),n.$tabs=n.$el.children(),n.scrollAreaWidth=n.$el.width(),n.totalTabs=n.$tabs.length;for(var e=2,a=0;a<n.totalTabs;a++)e+=n.$tabs.eq(a).width();n.$el.css("width",e),n.$navs=n.$em.children(),n.totalNavs=n.$navs.length,n.curTab=n.options.curTab,n.curNav=n.options.curNav,n.startTab=n.curTab,n.endTab=n.getRightArea(n.startTab).right,n.$tabs.eq(n.curTab-1).addClass("hover"),t("a",n.$tabs.eq(n.curTab-1)).addClass("current"),n.$window.find("a.left_arr").click(function(){var e=t(this),a=e.data("animation_state");return"busy"==a?!1:(e.data("animation_state","busy"),void n.goBack(e))}),n.$window.find("a.right_arr").click(function(){var e=t(this),a=e.data("animation_state");return"busy"==a?!1:(e.data("animation_state","busy"),void n.goForward(e))}),n.$tabs.delegate(this,"click",function(){n.change(n.$tabs.index(t(this))+1)}),n.$curList=t(".cyberpioneerlatest .cyberpioneer_content_box .slides.latest"),n.formatStyle()},n.formatStyle=function(){t("div.list_box img",n.$curList).css("width","215px"),t(">div>div",n.$curList).css("height","261px"),t(n.$curList).iosSlider({snapToChildren:!0,navSlideSelector:n.$navs,desktopClickDrag:!0,onSlideChange:n.changeNav,onSliderLoaded:n.changeNav})},n.isOver=function(){var t=n.totalTabs;return n.endTab==t?!0:!1},n.isBegin=function(){return 1==n.startTab?!0:!1},n.getRightArea=function(t){for(var e=n.$tabs.eq(t-1).width(),a=0,r=t,s=t,i=n.totalTabs,o=n.scrollAreaWidth;i>r;r++){var c=n.$tabs.eq(r).width();if(a=e+c,o>=e&&a>=o){s=r;break}e=a}var l={left:r,right:s,rightLength:e};return l},n.getLeftArea=function(t){for(var e=n.$tabs.eq(t-2).width(),a=0,r=t-1,s=t-1,i=(n.totalTabs,n.scrollAreaWidth);r>1;r--){var o=n.$tabs.eq(r-2).width();if(a=e+o,i>=e&&a>=i)break;e=a}var c={left:r,right:s,leftLength:e};return c},n.goForward=function(e){if(n.isOver())return t(e).data("animation_state","complete"),!1;var a,r,s=n.getRightArea(n.startTab),i=s.rightLength;n.startTab=n.endTab+1,n.endTab=n.getRightArea(n.startTab).left,n.isOver()&&(r=n.getRightArea(n.startTab),a=r.rightLength,i=i+a-n.scrollAreaWidth);var o=n.$el.css("margin-left");o=parseInt(o.substring(0,o.length-2),10),i=o-i,n.$el.animate({marginLeft:i},n.options.speed,function(){n.startTab=n.getLeftArea(n.endTab+1).left,t(e).data("animation_state","complete")})},n.goBack=function(e){if(n.isBegin())return t(e).data("animation_state","complete"),!1;var a,r,s=n.getLeftArea(n.startTab),i=s.leftLength;n.startTab=s.left,n.isOver()&&(a=n.getLeftArea(n.endTab+1),r=a.leftLength,i=i+r-n.scrollAreaWidth);var o=n.$el.css("margin-left");o=parseInt(o.substring(0,o.length-2),10),i=o+i,n.$el.animate({marginLeft:i},n.options.speed,function(){n.endTab=n.getRightArea(n.startTab).right,t(e).data("animation_state","complete")})},n.change=function(e){n.$tabs.eq(n.curTab-1).removeClass("hover"),t("a",n.$tabs.eq(n.curTab-1)).removeClass("current"),t(n.$curList).iosSlider("destroy"),n.$curList.addClass("hide"),t("a",n.$navs.eq(n.curNav)).removeClass("current"),n.curTab=e;var a=n.$tabs.eq(n.curTab-1).attr("id"),r=!1;if(t(".cyberpioneerlatest .cyberpioneer_content_box .slides").each(function(){t(this).hasClass(a)&&(r=!0)}),r){var s=".cyberpioneerlatest .cyberpioneer_content_box .slides."+a+" div .list_box";constructNav($(s)),n.$navs=n.$em.children(),t(".cyberpioneerlatest .cyberpioneer_content_box .slides").each(function(){t(this).hasClass(a)&&(n.$curList=t(this))}),n.curNav=0;var i=t(".cyberpioneer_content_box .category_path").html();"latest"!=a&&(i+="/"+a),t(".cyberpioneer_content_box .button_box1 a").attr("href",i+".html"),n.$tabs.eq(n.curTab-1).addClass("hover"),t("a",n.$tabs.eq(n.curTab-1)).addClass("current"),n.$curList.hasClass("hide")&&n.$curList.removeClass("hide"),n.formatStyle()}else{var o="/nsp/wcm/connect/iMindef%20Content/iMindef/Homepage/Homepage?srv=cmpnt&source=library&cmpntname=iMindef%20Design/Homepage/Cyberpioneer/Cyberpioneer%20List&category="+a;t.ajax({type:"get",url:o,dataType:"html",cache:!1,beforeSend:function(e){var a=t("<div class='loader'><img class='loader'/></div>");a.css("width","470"),a.css("height","261px");t(".cyberpioneer_content_box .content_path").html();t("img",a).attr("src","etc/design/imindef_style/imindef2012/images/imagegallery/loader.gif"),t("img",a).css("top","40%"),t("img",a).css("left","45%"),t("img",a).css("position","absolute"),t(a).insertBefore(t(".cyberpioneer_content_box .button_box1"))},success:function(e,r){t(".cyberpioneer_content_box div.loader").remove();var s=t(e),i=".cyberpioneerlatest .cyberpioneer_content_box .slides."+a+" div";constructSlides(a),groupContents(s,i),constructNav(s),$(".cyberpioneerlatest").find(".viceTitle").dotdotdot({ellipsis:"...",wrap:"letter"}),$(".cyberpioneerlatest").find(".briefDesc").dotdotdot({ellipsis:"...",wrap:"letter"}),n.$navs=n.$em.children(),t(".cyberpioneerlatest .cyberpioneer_content_box .slides").each(function(){t(this).hasClass(a)&&(n.$curList=t(this))}),n.curNav=0;var o=t(".cyberpioneer_content_box .category_path").html();"latest"!=a&&(o+="/"+a),t(".cyberpioneer_content_box .button_box1 a").attr("href",o+".html"),n.$tabs.eq(n.curTab-1).addClass("hover"),t("a",n.$tabs.eq(n.curTab-1)).addClass("current"),n.$curList.hasClass("hide")&&n.$curList.removeClass("hide"),n.formatStyle()},error:function(){alert("Error!!!")}})}},n.changeNav=function(e){t("a",n.$navs.eq(n.curNav)).removeClass("current"),n.curNav=e.currentSlideNumber,t("a",n.$navs.eq(n.curNav)).addClass("current")},n.init()},t.tabs.defaultOptions={curTab:1,curNav:0,speed:1e3,contentWidth:470},t.fn.tabs=function(e,a,r){return this.each(function(){var r=this;t(e).each(function(){new t.tabs(r,this,a)})})}}(jQuery);